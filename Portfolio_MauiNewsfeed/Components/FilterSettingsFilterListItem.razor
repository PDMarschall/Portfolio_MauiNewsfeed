@using Portfolio_MauiNewsfeed.Filtering;

<div class="list-group-item rounded-3 py-3 border-1 filter-item d-flex justify-content-between align-items-center @(IsActive ? "selected-filter" : "filter-item-hoverable")" id="@Id">
      <div class="d-flex flex-column">
        <label class="@(IsActive ? "fw-bold" : "")" for="@Id">@Filter.Title</label>
        @if (IsActive)
        {
            @if (Filter.UserBlacklist.Count > 0)
            {
                <span class="d-block small opacity-50 fw-light">
                Blacklist: @String.Join(", ", Filter.UserBlacklist)
                </span>
            }
            @if (Filter.UserWhitelist.Count > 0)
            {
                <span class="d-block small opacity-50 fw-light">
                Whitelist: @String.Join(", ", Filter.UserWhitelist)
                </span>
            }
        }
      </div>
      <div class="btn-group align-self-center" role="group">
        <label class="btn @(IsActive ? "btn-filter" : "btn-outline-filter")" @onclick="EditFilter">Rediger</label>
        <label class="btn @(IsActive ? "btn-filter" : "btn-outline-filter")" @onclick="DeleteFilter">Slet</label>
        <label class="btn @(IsActive ? "btn-filter" : "btn-outline-filter")" @onclick="SelectFilter">Vælg</label>
    </div>
    </div>
  



@code {

    [Parameter, EditorRequired]
    public string ListName { get; set; }

    [Parameter, EditorRequired]
    public string Id { get; set; }

    [Parameter]
    public NewsfeedFilter Filter { get; set; }

    public bool IsActive => this.Filter.Title == Preferences.Get("ActiveFilter", "None");

    [Parameter]
    public EventCallback<NewsfeedFilter> OnSelectFilter { get; set; }

    [Parameter]
    public EventCallback<NewsfeedFilter> OnDeleteFilter { get; set; }

    [Parameter]
    public EventCallback<NewsfeedFilter> OnEditFilter { get; set; }

    public void SelectFilter()
    {
        if (!IsActive)
        {
            Preferences.Set("ActiveFilter", Filter.Title);
            OnSelectFilter.InvokeAsync(Filter);
        }
        else
            Preferences.Set("ActiveFilter", "None");
    }

    public void DeleteFilter()
    {
        OnDeleteFilter.InvokeAsync(Filter);
    }

    public void EditFilter()
    {
        OnEditFilter.InvokeAsync(Filter);
    }
}
